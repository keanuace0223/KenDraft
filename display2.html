<!DOCTYPE html>
<html lang="en">
    <link rel="stylesheet" href="display2.css">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
<div class="mainbox">

    <div class="upper">

        <div class="upperside">


            <div class="teamnameholder1">
                <div id="name-box-1" ></div>
            </div>

            <div class="banholder">

                <div class="banhero">
                    <div id="image-box-11" class="image-box"><img id="image-display-11" src=""></div>
                    <div id="ban-left-1" class="box ban0"></div>  
                </div>
                <div class="banhero">
                    <div id="image-box-12" class="image-box"><img id="image-display-12" src=""></div>
                    <div id="ban-left-2" class="box ban0"></div>  
                </div>
                <div class="banhero">
                    <div id="image-box-13" class="image-box"><img id="image-display-13" src=""></div>
                    <div id="ban-left-3" class="box ban0"></div>  
                </div>
                <div class="banhero">
                    <div id="image-box-14" class="image-box"><img id="image-display-14" src=""></div>
                    <div id="ban-left-4" class="box ban0"></div>  
                </div>

                <div class="banhero">
                    <div id="image-box-15" class="image-box"><img id="image-display-15" src=""></div>
                    <div id="ban-left-5" class="box ban0"></div>  
                </div>

            </div>


        </div>

        <div class="uppermid">
            <div class="map-display-container" id="map-display-container"></div>
        </div>

        <div class="upperside uppderside2">

            <div class="banholder banholder2">

                <div class="banhero ">
                    <div id="image-box-20" class="image-box"><img id="image-display-20" src=""></div>
                    <div id="ban-right-5" class="box ban0"></div>
                </div>
                <div class="banhero ">
                    <div id="image-box-19" class="image-box"><img id="image-display-19" src=""></div>
                    <div id="ban-right-4" class="box ban0"></div>
                </div>
                <div class="banhero ">
                    <div id="image-box-18" class="image-box"><img id="image-display-18" src=""></div>
                    <div id="ban-right-3" class="box ban0"></div>
                </div>
                <div class="banhero">
                    <div id="image-box-17" class="image-box"><img id="image-display-17" src=""></div>
                    <div id="ban-right-2" class="box ban0"></div>
                </div>
                <div class="banhero">
                    <div id="image-box-16" class="image-box"><img id="image-display-16" src=""></div>
                    <div id="ban-right-1" class="box ban0"></div>
                </div>
                

            </div>

            <div class="teamnameholder2">
                <div id="name-box-8" ></div>
            </div>


            
        </div>

    </div>

    <div class="lower">

        <div class="lowerside">

            <div class="pickholder">

                <div class="heropick">
                    <div id="image-box-1" class="image-box"><img id="image-display-1" src=""></div>
                    <div class="name-image-box" id="name-image-box-3"></div>
                    <div class="hero-name-box" id="hero-name-box-1"></div>
                    <div class="picking-text-container" id="picking-text-container-left-1">
                        <div class="picking-text picking-text-outline" id="picking-text-left-1-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-left-1-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-left-1-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-left-1"></div>
                    <div id="pick-left-1" class="box pick"></div>
                </div>
                <div class="heropick">
                    <div id="image-box-2" class="image-box"><img id="image-display-2" src=""></div>
                    <div class="name-image-box" id="name-image-box-4"></div>
                    <div class="hero-name-box" id="hero-name-box-2"></div>
                    <div class="picking-text-container" id="picking-text-container-left-2">
                        <div class="picking-text picking-text-outline" id="picking-text-left-2-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-left-2-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-left-2-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-left-2"></div>
                    <div id="pick-left-2" class="box pick"></div>
                </div>
                <div class="heropick">
                    <div id="image-box-3" class="image-box"><img id="image-display-3" src=""></div>
                    <div class="name-image-box" id="name-image-box-5"></div>
                    <div class="hero-name-box" id="hero-name-box-3"></div>
                    <div class="picking-text-container" id="picking-text-container-left-3">
                        <div class="picking-text picking-text-outline" id="picking-text-left-3-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-left-3-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-left-3-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-left-3"></div>
                    <div id="pick-left-3" class="box pick"></div>
                </div>
                <div class="heropick">
                    <div id="image-box-4" class="image-box"><img id="image-display-4" src=""></div>
                    <div class="name-image-box" id="name-image-box-6"></div>
                    <div class="hero-name-box" id="hero-name-box-4"></div>
                    <div class="picking-text-container" id="picking-text-container-left-4">
                        <div class="picking-text picking-text-outline" id="picking-text-left-4-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-left-4-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-left-4-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-left-4"></div>
                    <div id="pick-left-4" class="box pick"></div>
                </div>
                <div class="heropick">
                    <div id="image-box-5" class="image-box"><img id="image-display-5" src=""></div>
                    <div class="name-image-box" id="name-image-box-7"></div>
                    <div class="hero-name-box" id="hero-name-box-5"></div>
                    <div class="picking-text-container" id="picking-text-container-left-5">
                        <div class="picking-text picking-text-outline" id="picking-text-left-5-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-left-5-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-left-5-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-left-5"></div>
                    <div id="pick-left-5" class="box pick"></div>
                </div>

            </div>

            <div class="nickholder">

                <div class="playername ">
                    <div id="name-box-3" ></div>
                </div>
                <div class="playername">
                    <div id="name-box-4" ></div>
                </div>
                <div class="playername">
                    <div id="name-box-5" ></div>
                </div>
                <div class="playername">
                    <div id="name-box-6" ></div>
                </div>
                <div class="playername">
                    <div id="name-box-7" ></div>
                </div>

            </div>

        </div>

        <div class="lowermid">

            <div class="upperlowermid">

                <div class="score">
                    <div id="name-box-2" ></div>
                </div>



                <div class="score">
                    <div id="name-box-9" ></div>
                </div>

                <div class="timerbar-wrapper">
                    <div class="timerbar">
                        <div id="timer-bar"></div> 
                    </div>
                </div>

            </div>

            <div class="lowerlowermid">
                
                <div class="timer-container">
                    <div id="timer-arrow-left" class="timer-arrow timer-arrow-left"></div>
                    <div class="timer-content">
                        <div id="timer-number" class="timer-number">0</div>
                        <div id="timer-phase" class="timer-phase"></div>
                    </div>
                    <div id="timer-arrow-right" class="timer-arrow timer-arrow-right"></div>
                </div>
            </div>

        </div>

        <div class="lowerside">

            <div class="pickholder">

                <div class="heropick2">
                    <div id="image-box-10" class="image-box"><img id="image-display-10" src=""></div>
                    <div class="name-image-box" id="name-image-box-14"></div>
                    <div class="hero-name-box" id="hero-name-box-10"></div>
                    <div class="picking-text-container" id="picking-text-container-right-5">
                        <div class="picking-text picking-text-outline" id="picking-text-right-5-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-right-5-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-right-5-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-right-5"></div>
                    <div id="pick-right-5" class="box pick"></div> 
                </div>

                <div class="heropick2">
                    <div id="image-box-9" class="image-box"><img id="image-display-9" src=""></div>
                    <div class="name-image-box" id="name-image-box-13"></div>
                    <div class="hero-name-box" id="hero-name-box-9"></div>
                    <div class="picking-text-container" id="picking-text-container-right-4">
                        <div class="picking-text picking-text-outline" id="picking-text-right-4-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-right-4-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-right-4-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-right-4"></div>
                    <div id="pick-right-4" class="box pick"></div>
                </div>
                
                <div class="heropick2">
                    <div id="image-box-8" class="image-box"><img id="image-display-8" src=""></div>
                    <div class="name-image-box" id="name-image-box-12"></div>
                    <div class="hero-name-box" id="hero-name-box-8"></div>
                    <div class="picking-text-container" id="picking-text-container-right-3">
                        <div class="picking-text picking-text-outline" id="picking-text-right-3-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-right-3-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-right-3-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-right-3"></div>
                    <div id="pick-right-3" class="box pick"></div>
                </div>

                <div class="heropick2">
                    <div id="image-box-7" class="image-box"><img id="image-display-7" src=""></div>
                    <div class="name-image-box" id="name-image-box-11"></div>
                    <div class="hero-name-box" id="hero-name-box-7"></div>
                    <div class="picking-text-container" id="picking-text-container-right-2">
                        <div class="picking-text picking-text-outline" id="picking-text-right-2-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-right-2-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-right-2-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-right-2"></div>
                    <div id="pick-right-2" class="box pick"></div>
                </div>

                <div class="heropick2">
                    <div id="image-box-6" class="image-box"><img id="image-display-6" src=""></div>
                    <div class="name-image-box" id="name-image-box-10"></div>
                    <div class="hero-name-box" id="hero-name-box-6"></div>
                    <div class="picking-text-container" id="picking-text-container-right-1">
                        <div class="picking-text picking-text-outline" id="picking-text-right-1-top"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                        <div class="picking-text" id="picking-text-right-1-middle">PICKING</div>
                        <div class="picking-text picking-text-outline" id="picking-text-right-1-bottom"><span>P</span><span>I</span><span>C</span><span>K</span><span>I</span><span>N</span><span>G</span></div>
                    </div>
                    <div class="pick-cover" id="pick-cover-right-1"></div>
                    <div id="pick-right-1" class="box pick"></div>
                </div>

            </div>

            <div class="nickholder">

                <div class="playername playername2">
                    <div id="name-box-14" ></div>
                </div>
                <div class="playername playername2">
                    <div id="name-box-13" ></div>
                </div>
                <div class="playername playername2">
                    <div id="name-box-12" ></div>
                </div>
                <div class="playername playername2">
                    <div id="name-box-11" ></div>
                </div>
                <div class="playername playername2">
                    <div id="name-box-10" ></div>
                </div>

            </div>

        </div>

    </div>


</div>

<audio id="hero-voice"></audio>
<div class="audio-toggle-container">
    <label class="audio-toggle-label">Audio</label>
    <label class="audio-switch">
        <input type="checkbox" id="audio-toggle" checked>
        <span class="audio-slider"></span>
    </label>
</div>



       <div class="phasebox"> <h2 id="phase"></h2>
        



<div class="hide">
    <div id="image-box-15" class="image-box"><img id="image-display-15" src=""></div>
    <div id="ban-left-5" class="box ban0"></div>  

    <div id="image-box-20" class="image-box"><img id="image-display-20" src=""></div>
    <div id="ban-right-5" class="box ban0"></div>
</div>

</body>

<script src="script/displaynicknamelogo.js"></script>
<script src="script/displayhero.js"></script>
<script src="crossclient.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const mapDisplayContainer = document.getElementById('map-display-container');
        let lastMapState = null;
        
        function displayMap(state) {
            if (state && state.status === 'finished' && state.result) {
                mapDisplayContainer.innerHTML = `
                    <div class="map">
                        <img src="Assets/map/${state.result}.png" alt="${state.result}">
                    </div>
                `;
                const img = mapDisplayContainer.querySelector('.map img');
                if (img) {
                    img.classList.remove('map-exit');
                    // Force reflow before adding enter class to reliably trigger animation
                    void img.offsetWidth;
                    img.classList.add('map-enter');
                }
                mapDisplayContainer.classList.add('show');
            } else if (state && state.status === 'drawing') {
                const img = mapDisplayContainer.querySelector('.map img');
                if (img) {
                    img.classList.remove('map-enter');
                    // Force reflow to restart exit animation if needed
                    void img.offsetWidth;
                    img.classList.add('map-exit');
                    img.addEventListener('animationend', function handler() {
                        img.removeEventListener('animationend', handler);
                        mapDisplayContainer.innerHTML = '';
                        mapDisplayContainer.classList.remove('show');
                    });
                }
            } else {
                const img = mapDisplayContainer.querySelector('.map img');
                if (img) {
                    img.classList.remove('map-enter');
                    void img.offsetWidth;
                    img.classList.add('map-exit');
                    img.addEventListener('animationend', function handler() {
                        img.removeEventListener('animationend', handler);
                        mapDisplayContainer.innerHTML = '';
                        mapDisplayContainer.classList.remove('show');
                    });
                }
            }
        }
        
        function checkMapState() {
            try {
                const currentData = localStorage.getItem('mapDrawState');
                const currentState = currentData ? JSON.parse(currentData) : null;
                
                // Only update if state has changed
                if (JSON.stringify(currentState) !== JSON.stringify(lastMapState)) {
                    lastMapState = currentState;
                    displayMap(currentState);
                }
            } catch (e) {
                console.error('Error checking map state:', e);
            }
        }
        
        // Listen for storage events (when mapDrawState changes from other windows/tabs)
        // Note: storage events only fire for changes from other windows/tabs, not same window
        window.addEventListener('storage', (event) => {
            if (event.key === 'mapDrawState') {
                const newState = event.newValue ? JSON.parse(event.newValue) : null;
                lastMapState = newState;
                displayMap(newState);
            }
        });
        
        // Check initial state on load
        checkMapState();
        
        // Poll for changes (handles same-window localStorage updates)
        setInterval(checkMapState, 500);
    });
</script>

</html>